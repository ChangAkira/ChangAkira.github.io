let FriendsJS={requestAPI:(o,l,s)=>{let i=5;!function n(){new Promise((t,e)=>{let r=0,a=setTimeout(()=>{0===r&&(r=2,a=null,e("请求超时"),0==i)&&s()},5e3);fetch(o).then(function(e){if(2!==r&&(clearTimeout(a),t(e),a=null,r=1),e.ok)return e.json();throw new Error("Network response was not ok.")}).then(function(e){i=0,l(e)}).catch(function(e){0<i?(--i,setTimeout(()=>{n()},5e3)):s()})})}()},layout:n=>{let t=n.el;FriendsJS.requestAPI(n.api,function(e){t.querySelector(".loading-wrap").remove();var e=e.content,a="";e.forEach((e,t)=>{var r=(r=(r='<div class="user-card">')+'<a class="card-link" target="_blank" rel="external noopener noreferrer"'+(' href="'+e.url+'">'))+('<img alt="'+e.title+'" src="'+(e.avatar||n.avatar)+'" onerror="errorImgAvatar(this)">');a+=r=(r+='<div class="name"><span>'+e.title+"</span></div>")+"</a>"+"</div>"}),t.querySelector(".group-body").innerHTML=a},function(){try{t.querySelector(".loading-wrap svg").remove(),t.querySelector(".loading-wrap p").innerText("加载失败，请稍后重试。")}catch(e){}})},start:()=>{for(var e=document.getElementsByClassName("friendsjs-wrap"),t=0;t<e.length;t++){var r,a=e[t],n=a.getAttribute("api");null!=n&&((r=new Object).el=a,r.api=n,r.class=a.getAttribute("class"),r.avatar=volantis.GLOBAL_CONFIG.default.avatar,FriendsJS.layout(r))}}};FriendsJS.start(),document.addEventListener("pjax:complete",function(){FriendsJS.start()});